<!--
 * @Author: @ydzat
 * @Date: 2025-05-14 14:45:00
 * @LastEditors: @ydzat
 * @LastEditTime: 2025-05-14 14:45:00
 * @Description: KnowForge项目开发路线图
-->

# KnowForge项目后续开发路线图

## 当前发展阶段概述

KnowForge项目现处于早期发展阶段(0.1.2)，基础架构已经建立，部分核心功能已经实现。截至目前已完成的主要工作包括：

1. **基础架构搭建** (0.1.0)：
   - 核心模块结构设计与实现
   - 多语言支持系统
   - 基础配置管理
   - 多源输入处理(PDF、网页链接、代码文件)
   - 命令行界面

2. **日志系统升级** (0.1.1)：
   - 集成Logloom日志系统
   - 实现日志国际化支持
   - 添加日志文件轮转功能

3. **向量记忆管理优化** (0.1.2)：
   - ChromaDB API兼容性修复
   - 混合检索策略增强
   - 阈值处理逻辑优化
   - 关键词匹配功能完善

## 后续开发优先级

### 1. 短期目标 (0.1.3 - 0.1.5)

#### 1.1 输入处理增强
- **图片OCR能力强化**：目前已支持基础输入类型，但图片OCR功能需要进一步增强
  - 实现多语言OCR支持(中英文、公式识别)
  - 添加图像预处理(去噪、对比度增强)以提高OCR准确率
  - 开发图像分析能力，识别图表、表格、流程图

#### 1.2 LLM调用模块强化
- **DeepSeek模型调用优化**：
  - 添加更多模型选项(DeepSeek Chat/Reasoner)
  - 优化Prompt模板，提高生成质量
  - 实现上下文管理器，避免超长输入
  - 增加模型参数(temperature等)动态调整功能

#### 1.3 输出格式扩展
- **丰富输出能力**：
  - 完善PDF生成(目前仅有基础支持)
  - 优化Jupyter Notebook输出格式
  - 添加HTML输出选项
  - 支持代码块语法高亮

#### 1.4 测试覆盖增强
- **扩大测试覆盖率**：
  - 为新功能添加单元测试
  - 为LLM调用添加模拟测试
  - 开发端到端测试用例
  - 实现自动化测试流程

### 2. 中期目标 (0.2.0 - 0.3.0)

#### 2.1 高级记忆管理功能
- **记忆库管理增强**：
  - 实现记忆有效期管理
  - 添加记忆优先级排序
  - 开发记忆分类标签系统
  - 支持记忆库查询与浏览界面

#### 2.2 用户界面开发
- **添加图形界面**：
  - 开发基于Web的用户界面(如使用Flask或Streamlit)
  - 设计直观的操作流程
  - 添加实时处理进度显示
  - 提供结果预览功能

#### 2.3 插件系统设计
- **实现可扩展插件架构**：
  - 设计统一的插件接口
  - 支持自定义输入源插件
  - 支持自定义输出格式插件
  - 实现模型提供商插件(支持更多LLM)

#### 2.4 MoeAI-C系统集成
- **与MoeAI-C系统对接**：
  - 实现标准API接口
  - 支持远程调用
  - 实现数据同步机制
  - 设计安全验证流程

### 3. 长期目标 (0.4.0+)

#### 3.1 多模态支持
- **扩展多模态能力**：
  - 添加音频输入处理
  - 支持视频内容提取与分析
  - 实现图像与文本的混合理解
  - 支持多模态输出(含图表生成)

#### 3.2 协同工作流
- **支持多用户协作**：
  - 开发用户权限管理
  - 实现共享记忆库
  - 支持笔记协同编辑
  - 添加评注与反馈机制

#### 3.3 离线模式与性能优化
- **提升离线能力**：
  - 支持本地小型模型
  - 优化向量数据库性能
  - 实现增量处理机制
  - 降低资源消耗

## 开发建议与最佳实践

### 代码组织与风格
1. **遵循已建立的模块化结构**，保持高内聚、低耦合
2. **完善文档**，为每个新功能添加详细注释和设计文档
3. **保持国际化支持**，所有用户可见文本使用LocaleManager管理
4. **统一错误处理**，使用自定义异常类(NoteGenError及子类)

### 测试策略
1. **编写单元测试**，确保每个新功能有测试覆盖
2. **使用mock对象**，模拟外部依赖(如LLM API)
3. **定期运行集成测试**，验证系统整体功能
4. **为发现的bug创建回归测试**，防止重现

### 版本控制与发布
1. **遵循语义化版本控制**(SemVer)：
   - 小版本(0.1.x)用于bug修复和小功能增强
   - 中版本(0.x.0)用于新功能模块
   - 大版本(x.0.0)用于架构重大变更
2. **维护CHANGELOG**，详细记录每个版本的变更
3. **定期发布**，保持较小的更新步伐，便于测试和反馈

## 下一步具体行动计划

### 近期任务(优先级从高到低)
1. **实现图片OCR功能**
   - 集成easyocr库，支持中英文识别
   - 添加图像预处理功能
   - 编写测试用例

2. **优化LLM调用逻辑**
   - 增强Prompt工程，提升生成质量
   - 实现动态上下文窗口管理
   - 添加更多模型选项配置

3. **完善PDF输出功能**
   - 实现从Markdown到PDF的转换
   - 添加目录生成
   - 支持自定义样式

4. **开发基本Web界面**
   - 设计简洁的用户交互流程
   - 实现文件上传与结果展示
   - 添加基本进度显示功能

### 技术债务处理
1. **重构memory_manager模块**，进一步优化代码组织
2. **优化向量检索性能**，特别是对大型记忆库
3. **完善测试覆盖**，特别是对最近修改的部分

## 结论

KnowForge项目已经建立了良好的基础架构，实现了核心功能的早期版本。通过持续迭代和模块增强，项目正朝着成为一个全功能的AI辅助学习笔记生成器的方向发展。当前的优先事项是增强输入处理能力，优化LLM调用模块，扩展输出格式选项，并提高测试覆盖率。

后续开发应当保持模块化设计，遵循已建立的代码组织和国际化支持原则，同时不断完善文档和测试。根据功能优先级有序推进，保持较小的更新步伐，便于及时获取反馈并进行调整。